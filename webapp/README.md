# üåê EpicService WebApp (Frontend)

**–ü–æ–≤–Ω–æ—Ñ—É–Ω–∫—Ü—ñ–æ–Ω–∞–ª—å–Ω–∏–π Telegram Mini App –∑ PWA –ø—ñ–¥—Ç—Ä–∏–º–∫–æ—é**

---

## üìö –ó–º—ñ—Å—Ç

- [–û–≥–ª—è–¥](#–æ–≥–ª—è–¥)
- [–ê—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä–∞](#–∞—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä–∞)
- [–¢–µ—Ö–Ω–æ–ª–æ–≥—ñ—ó](#—Ç–µ—Ö–Ω–æ–ª–æ–≥—ñ—ó)
- [PWA —Ñ—É–Ω–∫—Ü—ñ–æ–Ω–∞–ª](#pwa-—Ñ—É–Ω–∫—Ü—ñ–æ–Ω–∞–ª)
- [–û—Å–Ω–æ–≤–Ω—ñ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∏](#–æ—Å–Ω–æ–≤–Ω—ñ-–∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∏)
- [API —ñ–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—è](#api-—ñ–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—è)
- [–ê–¥–º—ñ–Ω-–ø–∞–Ω–µ–ª—å](#–∞–¥–º—ñ–Ω-–ø–∞–Ω–µ–ª—å)
- [UI/UX –æ—Å–æ–±–ª–∏–≤–æ—Å—Ç—ñ](#uiux-–æ—Å–æ–±–ª–∏–≤–æ—Å—Ç—ñ)
- [–ó–∞–ø—É—Å–∫](#–∑–∞–ø—É—Å–∫)

---

## üéØ –û–≥–ª—è–¥

WebApp ‚Äî —Ü–µ –∫–ª—ñ—î–Ω—Ç—Å—å–∫–∞ —á–∞—Å—Ç–∏–Ω–∞ –ø—Ä–æ–µ–∫—Ç—É EpicService, —è–∫–∞ –≤–∏–∫–æ–Ω—É—î—Ç—å—Å—è —è–∫ Telegram Mini App —ñ –º–æ–∂–µ –±—É—Ç–∏ –≤—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞ —è–∫ PWA.

### –û—Å–Ω–æ–≤–Ω—ñ –º–æ–∂–ª–∏–≤–æ—Å—Ç—ñ:

#### üë• –ö–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ:
- üîç **–ü–æ—à—É–∫** —Ç–æ–≤–∞—Ä—ñ–≤ –∑ debounce (500ms)
- üìã **–°–ø–∏—Å–∫–∏** –∑ —Ä–µ–¥–∞–≥—É–≤–∞–Ω–Ω—è–º —Ç–∞ –≤–∏–¥–∞–ª–µ–Ω–Ω—è–º
- üîí **–ë–ª–æ–∫—É–≤–∞–Ω–Ω—è –≤—ñ–¥–¥—ñ–ª—ñ–≤** ‚Äî –≤—ñ–∑—É–∞–ª—å–Ω–∞ —ñ–Ω–¥–∏–∫–∞—Ü—ñ—è
- üìä **–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞** ‚Äî –∫—Ä–∞—Å–∏–≤–∞ –∫–∞—Ä—Ç–∫–∞ –∑ –≥—Ä–∞–¥—ñ—î–Ω—Ç–æ–º
- üìÅ **–ê—Ä—Ö—ñ–≤** ‚Äî –∑ –¥–µ—Ç–∞–ª—å–Ω–æ—é —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—î—é
- üì• **ZIP –µ–∫—Å–ø–æ—Ä—Ç** –≤—Å—ñ—Ö –∞—Ä—Ö—ñ–≤—ñ–≤
- üîÑ **Pull-to-refresh** –Ω–∞ –≤—Å—ñ—Ö –≤–∫–ª–∞–¥–∫–∞—Ö
- üåì **–ê–¥–∞–ø—Ç–∏–≤–Ω–∞ —Ç–µ–º–∞** (dark/light)

#### üëë –ê–¥–º—ñ–Ω—ñ—Å—Ç—Ä–∞—Ç–æ—Ä–∏:
- üìä **–ê–Ω–∞–ª—ñ—Ç–∏–∫–∞** –∑ –∫–ª—ñ–∫–∞–±–µ–ª—å–Ω–∏–º–∏ –∫–∞—Ä—Ç–∫–∞–º–∏
- üì• **–Ü–º–ø–æ—Ä—Ç** Excel –∑ drag & drop
- üì§ **–ï–∫—Å–ø–æ—Ä—Ç** –∑–≤—ñ—Ç—ñ–≤
- üíæ **–ü—Ä–∏–º—É—Å–æ–≤–µ –∑–±–µ—Ä–µ–∂–µ–Ω–Ω—è** —Å–ø–∏—Å–∫—ñ–≤
- üì¢ **–†–æ–∑—Å–∏–ª–∫–∞** –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω—å
- üìà **–í—ñ–∑—É–∞–ª—ñ–∑–∞—Ü—ñ—è** —Ä–µ–∑–µ—Ä–≤—ñ–≤ –ø–æ –≤—ñ–¥–¥—ñ–ª–∞—Ö

---

## üèóÔ∏è –ê—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä–∞

```
webapp/
‚îú‚îÄ‚îÄ api.py                  # FastAPI –¥–æ–¥–∞—Ç–æ–∫
‚îú‚îÄ‚îÄ routers/
‚îÇ   ‚îú‚îÄ‚îÄ client.py          # User API endpoints
‚îÇ   ‚îî‚îÄ‚îÄ admin.py           # Admin API endpoints
‚îú‚îÄ‚îÄ templates/
‚îÇ   ‚îî‚îÄ‚îÄ index.html         # –û—Å–Ω–æ–≤–Ω–∏–π SPA
‚îî‚îÄ‚îÄ static/
    ‚îú‚îÄ‚îÄ manifest.json      # PWA manifest
    ‚îú‚îÄ‚îÄ sw.js              # Service Worker
    ‚îú‚îÄ‚îÄ pwa-install.js     # PWA —ñ–Ω—Å—Ç–∞–ª—è—Ü—ñ—è
    ‚îú‚îÄ‚îÄ pwa-redirect.js    # –†–µ–¥–∏—Ä–µ–∫—Ç –ª–æ–≥—ñ–∫–∞
    ‚îú‚îÄ‚îÄ pwa-styles.css     # PWA —Å—Ç–∏–ª—ñ
    ‚îú‚îÄ‚îÄ admin.html         # –ê–¥–º—ñ–Ω-–ø–∞–Ω–µ–ª—å (—Å—Ç–∞—Ç–∏—á–Ω–∞)
    ‚îî‚îÄ‚îÄ icons/
        ‚îú‚îÄ‚îÄ icon-192x192.png
        ‚îú‚îÄ‚îÄ icon-512x512.png
        ‚îî‚îÄ‚îÄ ...
```

---

## üöÄ –¢–µ—Ö–Ω–æ–ª–æ–≥—ñ—ó

### Frontend:
- **Vanilla JavaScript** ‚Äî –±–µ–∑ —Ñ—Ä–µ–π–º–≤–æ—Ä–∫—ñ–≤ –¥–ª—è –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ—ó —à–≤–∏–¥–∫–æ—Å—Ç—ñ
- **Telegram WebApp SDK** ‚Äî `window.Telegram.WebApp`
- **Service Worker API** ‚Äî –æ—Ñ–ª–∞–π–Ω –∫–µ—à—É–≤–∞–Ω–Ω—è
- **CSS Variables** ‚Äî –¥–∏–Ω–∞–º—ñ—á–Ω–µ —Ç–µ–º—É–≤–∞–Ω–Ω—è

### Backend (API):
- **FastAPI** ‚Äî async Python web framework
- **Jinja2** ‚Äî template engine
- **asyncpg** ‚Äî async PostgreSQL driver

---

## üì± PWA —Ñ—É–Ω–∫—Ü—ñ–æ–Ω–∞–ª

### 1. **Service Worker** (`sw.js`)

–ö–µ—à—É—î —Å—Ç–∞—Ç–∏—á–Ω—ñ —Ä–µ—Å—É—Ä—Å–∏ –¥–ª—è –æ—Ñ–ª–∞–π–Ω-—Ä–æ–±–æ—Ç–∏:

```javascript
const CACHE_NAME = 'epicservice-v1';
const urlsToCache = [
  '/',
  '/static/manifest.json',
  '/static/pwa-styles.css',
  '/static/icons/icon-192x192.png'
];
```

**–°—Ç—Ä–∞—Ç–µ–≥—ñ—è:** Cache First + Network Fallback

### 2. **Manifest** (`manifest.json`)

–û–ø–∏—Å PWA –¥–ª—è –≤—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è:

```json
{
  "name": "EpicService",
  "short_name": "Epic",
  "start_url": "/",
  "display": "standalone",
  "background_color": "#ffffff",
  "theme_color": "#3b82f6",
  "icons": [
    {
      "src": "/static/icons/icon-192x192.png",
      "sizes": "192x192",
      "type": "image/png"
    },
    {
      "src": "/static/icons/icon-512x512.png",
      "sizes": "512x512",
      "type": "image/png"
    }
  ]
}
```

### 3. **–Ü–Ω—Å—Ç–∞–ª—è—Ü—ñ—è** (`pwa-install.js`)

–ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–∏–π –±–∞–Ω–µ—Ä "–í—Å—Ç–∞–Ω–æ–≤–∏—Ç–∏ –¥–æ–¥–∞—Ç–æ–∫":

```javascript
window.addEventListener('beforeinstallprompt', (e) => {
  e.preventDefault();
  deferredPrompt = e;
  showInstallBanner();
});
```

### 4. **–†–µ–¥–∏—Ä–µ–∫—Ç** (`pwa-redirect.js`)

–í–∏—è–≤–ª—è—î —á–∏ –∑–∞–ø—É—â–µ–Ω–æ –≤ PWA —á–∏ Telegram:

```javascript
const isPWA = window.matchMedia('(display-mode: standalone)').matches;
const isTelegram = window.Telegram?.WebApp?.initData;

if (isPWA && !isTelegram) {
  // –†–µ–¥–∏—Ä–µ–∫—Ç –Ω–∞ Telegram
}
```

### 5. **Offline —ñ–Ω–¥–∏–∫–∞—Ç–æ—Ä**

–ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –ø–æ–∫–∞–∑—É—î –±–∞–Ω–µ—Ä –ø—Ä–∏ –≤—Ç—Ä–∞—Ç—ñ –∑–≤'—è–∑–∫—É:

```javascript
window.addEventListener('offline', () => {
  offlineIndicator.classList.add('show');
});
```

---

## üß© –û—Å–Ω–æ–≤–Ω—ñ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∏

### 1. **–ü–æ—à—É–∫** (üîç Search Tab)

```javascript
// Debounce –ø–æ—à—É–∫—É (500ms)
document.getElementById('searchInput').addEventListener('input', (e) => {
  clearTimeout(searchTimeout);
  const query = e.target.value.trim();
  
  if (query.length < 2) {
    document.getElementById('searchResults').innerHTML = '';
    return;
  }
  
  searchTimeout = setTimeout(() => search(query), 500);
});

// –†–µ–Ω–¥–µ—Ä —Ç–æ–≤–∞—Ä—É –∑ –±–ª–æ–∫—É–≤–∞–Ω–Ω—è–º
function renderProduct(p) {
  const isLocked = p.is_different_department;
  const lockedClass = isLocked ? ' locked' : '';
  
  return `<div class="product-card${lockedClass}">
    <div class="lock-overlay">üîí</div>
    <!-- ... -->
  </div>`;
}
```

**–û—Å–æ–±–ª–∏–≤–æ—Å—Ç—ñ:**
- –í—ñ–∑—É–∞–ª—å–Ω–µ –±–ª–æ–∫—É–≤–∞–Ω–Ω—è (grayscale + üîí)
- –Ü–Ω–¥–∏–∫–∞—Ü—ñ—è –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—ñ/—Ä–µ–∑–µ—Ä–≤—É
- –î–µ—Ç–∞–ª—å–Ω–∞ —ñ–Ω—Ñ–æ (–≤—ñ–¥–¥—ñ–ª, –≥—Ä—É–ø–∞, –±–µ–∑ —Ä—É—Ö—É, —Ü—ñ–Ω–∞)

### 2. **–°–ø–∏—Å–æ–∫** (üìã List Tab)

```javascript
async function loadList() {
  const response = await fetch(`/api/list/${userId}`);
  const data = await response.json();
  
  // –û–Ω–æ–≤–ª—é—î–º–æ —ñ–Ω—Ñ–æ –ø—Ä–æ –≤—ñ–¥–¥—ñ–ª
  const deptResponse = await fetch(`/api/list/department/${userId}`);
  const deptData = await deptResponse.json();
  updateDepartmentInfo(deptData.department, data.count);
  
  // –ü–æ–∫–∞–∑—É—î–º–æ Total Box
  document.getElementById('totalSum').textContent = data.total.toFixed(2);
  document.getElementById('totalBox').style.display = 'flex';
}
```

**–û—Å–æ–±–ª–∏–≤–æ—Å—Ç—ñ:**
- Sticky Total Box –∑–Ω–∏–∑—É
- –Ü–Ω—Ñ–æ –ø—Ä–æ –ø–æ—Ç–æ—á–Ω–∏–π –≤—ñ–¥–¥—ñ–ª
- –†–µ–¥–∞–≥—É–≤–∞–Ω–Ω—è –∫—ñ–ª—å–∫–æ—Å—Ç—ñ —á–µ—Ä–µ–∑ –º–æ–¥–∞–ª—å–Ω–µ –≤—ñ–∫–Ω–æ

### 3. **–ê—Ä—Ö—ñ–≤** (üìÅ Archives Tab)

```javascript
async function loadArchives() {
  // –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞
  const stats = await loadStatistics();
  if (stats) statsCard.innerHTML = stats;
  
  // –°–ø–∏—Å–æ–∫ –∞—Ä—Ö—ñ–≤—ñ–≤
  const response = await fetch(`/api/archives/${userId}`);
  const data = await response.json();
  
  // –ö–Ω–æ–ø–∫–∞ ZIP –µ–∫—Å–ø–æ—Ä—Ç—É
  html += `<button class="download-all-btn" 
            onclick="downloadAllArchives()">
    üì¶ –ó–∞–≤–∞–Ω—Ç–∞–∂–∏—Ç–∏ –≤—Å—ñ –∞—Ä—Ö—ñ–≤–∏ (${data.archives.length})
  </button>`;
}
```

**–û—Å–æ–±–ª–∏–≤–æ—Å—Ç—ñ:**
- –ö—Ä–∞—Å–∏–≤–∞ –∫–∞—Ä—Ç–∫–∞ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –∑ –≥—Ä–∞–¥—ñ—î–Ω—Ç–æ–º
- –î–µ—Ç–∞–ª—å–Ω–∞ —ñ–Ω—Ñ–æ –ø–æ –∫–æ–∂–Ω–æ–º—É –∞—Ä—Ö—ñ–≤—É
- ZIP –µ–∫—Å–ø–æ—Ä—Ç –≤—Å—ñ—Ö —Ñ–∞–π–ª—ñ–≤
- –í–∏–¥–∞–ª–µ–Ω–Ω—è –æ–∫—Ä–µ–º–∏—Ö —Ñ–∞–π–ª—ñ–≤

### 4. **Pull-to-Refresh**

```javascript
document.addEventListener('touchstart', e => {
  if (window.scrollY === 0) {
    pullStartY = e.touches[0].clientY;
    pulling = true;
  }
}, {passive: true});

document.addEventListener('touchend', e => {
  if (!pulling) return;
  const pullDistance = e.changedTouches[0].clientY - pullStartY;
  
  if (pullDistance >= 80) {
    indicator.textContent = '‚ü≥ –û–Ω–æ–≤–ª–µ–Ω–Ω—è...';
    tg.HapticFeedback.impactOccurred('medium');
    refreshCurrentTab();
  }
});
```

**–ü—Ä–∞—Ü—é—î –Ω–∞ –≤—Å—ñ—Ö –≤–∫–ª–∞–¥–∫–∞—Ö!**

---

## üîå API —ñ–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—è

### User Endpoints:

```javascript
// –ü–æ—à—É–∫
POST /api/search
Body: { query: string, user_id: number }
Response: { products: Product[] }

// –î–æ–¥–∞—Ç–∏ —Ç–æ–≤–∞—Ä
POST /api/add
Body: { user_id, product_id, quantity }
Response: { success: boolean, message: string }

// –°–ø–∏—Å–æ–∫
GET /api/list/{user_id}
Response: { items: ListItem[], total: number, count: number }

// –ó–±–µ—Ä–µ–≥—Ç–∏
POST /api/save/{user_id}
Response: { success: boolean, cleared: boolean }

// –ê—Ä—Ö—ñ–≤–∏
GET /api/archives/{user_id}
Response: { archives: Archive[] }

// ZIP –µ–∫—Å–ø–æ—Ä—Ç
GET /api/archives/download-all/{user_id}
Response: application/zip

// –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
GET /api/statistics/{user_id}
Response: {
  total_lists: number,
  total_amount: number,
  this_month_lists: number,
  popular_department: string
}
```

### –ü—Ä–∏–∫–ª–∞–¥ –≤–∏–∫–ª–∏–∫—É:

```javascript
async function search(query) {
  const response = await fetch('/api/search', {
    method: 'POST',
    headers: {'Content-Type': 'application/json'},
    body: JSON.stringify({
      query: query,
      user_id: userId
    })
  });
  
  const data = await response.json();
  renderSearchResults(data.products);
}
```

---

## üëë –ê–¥–º—ñ–Ω-–ø–∞–Ω–µ–ª—å

### –ö–ª—ñ–∫–∞–±–µ–ª—å–Ω—ñ –∫–∞—Ä—Ç–∫–∏ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏:

```javascript
// –ö–∞—Ä—Ç–∫–∞ 1: –í—Å—ñ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ
<div class="admin-stat-card" onclick="showAllUsers()">
  <div class="admin-stat-icon">üë•</div>
  <div class="admin-stat-value">${data.total_users}</div>
  <div class="admin-stat-label">–ö–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤</div>
</div>

// –ö–∞—Ä—Ç–∫–∞ 2: –ê–∫—Ç–∏–≤–Ω—ñ —Å–ø–∏—Å–∫–∏
<div class="admin-stat-card success" onclick="showActiveUsers()">
  <div class="admin-stat-icon">üî•</div>
  <div class="admin-stat-value">${data.active_users}</div>
  <div class="admin-stat-label">–ê–∫—Ç–∏–≤–Ω–∏—Ö</div>
</div>

// –ö–∞—Ä—Ç–∫–∞ 3: –¢–æ–≤–∞—Ä–∏
<div class="admin-stat-card warning" onclick="showProductsInfo()">
  <div class="admin-stat-icon">üì¶</div>
  <div class="admin-stat-value">${data.total_products}</div>
  <div class="admin-stat-label">–¢–æ–≤–∞—Ä—ñ–≤</div>
</div>

// –ö–∞—Ä—Ç–∫–∞ 4: –†–µ–∑–µ—Ä–≤–∏
<div class="admin-stat-card danger" onclick="showReservedByDepartment()">
  <div class="admin-stat-icon">üí∞</div>
  <div class="admin-stat-value">${data.total_reserved_sum} ‚Ç¥</div>
  <div class="admin-stat-label">–ó–∞—Ä–µ–∑–µ—Ä–≤–æ–≤–∞–Ω–æ</div>
</div>
```

### –Ü–º–ø–æ—Ä—Ç Excel (Drag & Drop):

```javascript
const dropZone = document.getElementById('dropZone');

dropZone.addEventListener('drop', (e) => {
  e.preventDefault();
  const files = e.dataTransfer.files;
  if (files.length > 0) {
    selectedFile = files[0];
    updateFileInfo();
  }
});

async function uploadFile() {
  const formData = new FormData();
  formData.append('file', selectedFile);
  
  const response = await fetch(
    `/api/admin/import?user_id=${userId}&notify_users=${notifyChecked}`,
    { method: 'POST', body: formData }
  );
  
  const data = await response.json();
  // –ü–æ–∫–∞–∑—É—î–º–æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç: –î–æ–¥–∞–Ω–æ/–û–Ω–æ–≤–ª–µ–Ω–æ/–î–µ–∞–∫—Ç–∏–≤–æ–≤–∞–Ω–æ
}
```

### –ü—Ä–∏–º—É—Å–æ–≤–µ –∑–±–µ—Ä–µ–∂–µ–Ω–Ω—è:

```javascript
async function forceSave(targetUserId) {
  if (!confirm(`–ü—Ä–∏–º—É—Å–æ–≤–æ –∑–±–µ—Ä–µ–≥—Ç–∏ —Å–ø–∏—Å–æ–∫ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞ ${targetUserId}?`)) return;
  
  const response = await fetch(
    `/api/admin/force-save/${targetUserId}`,
    {
      method: 'POST',
      headers: {'Content-Type': 'application/json'},
      body: JSON.stringify({ user_id: userId })
    }
  );
  
  if (data.success) {
    tg.showAlert('‚úÖ ' + data.message);
    loadAdminActiveUsers();
  }
}
```

### –†–æ–∑—Å–∏–ª–∫–∞:

```javascript
async function sendBroadcast() {
  const message = document.getElementById('broadcastMessage').value.trim();
  
  const response = await fetch(
    `/api/admin/broadcast?user_id=${userId}`,
    {
      method: 'POST',
      headers: {'Content-Type': 'application/json'},
      body: JSON.stringify({ user_id: userId, message: message })
    }
  );
  
  // –ü–æ–∫–∞–∑—É—î–º–æ alert: –†–æ–∑—ñ—Å–ª–∞–Ω–æ N –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞–º
}
```

---

## üé® UI/UX –æ—Å–æ–±–ª–∏–≤–æ—Å—Ç—ñ

### 1. **–ê–¥–∞–ø—Ç–∏–≤–Ω–∞ —Ç–µ–º–∞**

```css
:root {
  --bg-color: var(--tg-theme-bg-color, #ffffff);
  --text-color: var(--tg-theme-text-color, #000000);
  --button-color: var(--tg-theme-button-color, #0088cc);
  /* ... */
}
```

–ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –ø–µ—Ä–µ–º–∏–∫–∞—î—Ç—å—Å—è –∑–∞ —Ç–µ–º–æ—é Telegram!

### 2. **Haptic Feedback**

```javascript
// –£—Å–ø—ñ—à–Ω–∞ –¥—ñ—è
tg.HapticFeedback.notificationOccurred('success');

// Pull-to-refresh
tg.HapticFeedback.impactOccurred('medium');

// –ü–æ–º–∏–ª–∫–∞
tg.HapticFeedback.notificationOccurred('error');
```

### 3. **Smooth –∞–Ω—ñ–º–∞—Ü—ñ—ó**

```css
.product-card {
  transition: transform 0.2s, background-color 0.3s ease;
}

.product-card:active {
  transform: scale(0.98);
}
```

### 4. **Sticky Header**

```css
.sticky-container {
  position: sticky;
  top: 0;
  z-index: 100;
  background: var(--bg-color);
  box-shadow: 0 2px 8px rgba(0,0,0,0.1);
}
```

### 5. **–¶–µ–Ω—Ç—Ä–æ–≤–∞–Ω–∏–π –∑–∞–≥–æ–ª–æ–≤–æ–∫**

```css
h1 {
  text-align: center;
  color: var(--button-color);
}
```

---

## üöÄ –ó–∞–ø—É—Å–∫

### –†–æ–∑—Ä–æ–±–∫–∞ (–ª–æ–∫–∞–ª—å–Ω–æ):

```bash
cd webapp
python api.py
# http://localhost:8000
```

### –ü—Ä–æ–¥–∞–∫—à–Ω (uvicorn):

```bash
uvicorn webapp.api:app --host 0.0.0.0 --port 8000 --workers 4
```

### –ü—Ä–æ–¥–∞–∫—à–Ω (systemd):

```bash
sudo systemctl start webapp
sudo systemctl enable webapp
sudo systemctl status webapp
```

**Service —Ñ–∞–π–ª:** `/etc/systemd/system/webapp.service`

```ini
[Unit]
Description=EpicService WebApp API
After=network.target

[Service]
Type=simple
User=your_user
WorkingDirectory=/home/your_user/epicservice
Environment="PATH=/home/your_user/epicservice/venv/bin"
ExecStart=/home/your_user/epicservice/venv/bin/uvicorn webapp.api:app --host 0.0.0.0 --port 8000 --workers 4
Restart=always

[Install]
WantedBy=multi-user.target
```

---

## üìñ Swagger UI

–ü—ñ—Å–ª—è –∑–∞–ø—É—Å–∫—É –¥–æ—Å—Ç—É–ø–Ω–∞ –∞–≤—Ç–æ–¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—è:

- **Swagger**: http://localhost:8000/docs
- **ReDoc**: http://localhost:8000/redoc

---

## üîß Debug

```javascript
// –õ–æ–≥—É–≤–∞–Ω–Ω—è –≤ –∫–æ–Ω—Å–æ–ª—ñ
console.log('App initialized:', { userId, isAdmin });
console.log('üöÄ PWA Ready!');
console.log('üì± Display mode:', 
  window.matchMedia('(display-mode: standalone)').matches ? 
  'Standalone (PWA)' : 'Browser'
);
```

---

## üõ°Ô∏è –ë–µ–∑–ø–µ–∫–∞

- ‚úÖ `user_id` –≤–∞–ª—ñ–¥–∞—Ü—ñ—è –Ω–∞ –∫–æ–∂–Ω–æ–º—É –µ–Ω–¥–ø–æ—ñ–Ω—Ç—ñ
- ‚úÖ ADMIN_IDS –ø–µ—Ä–µ–≤—ñ—Ä–∫–∞ –Ω–∞ –∫–ª—ñ—î–Ω—Ç—ñ —Ç–∞ —Å–µ—Ä–≤–µ—Ä—ñ
- ‚úÖ HTTPS only –¥–ª—è production
- ‚úÖ CORS –Ω–∞–ª–∞—à—Ç–æ–≤–∞–Ω–æ –¥–ª—è Telegram domain
- ‚úÖ CSP headers

---

## üìã TODO / Roadmap

- [ ] Push-–ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è —á–µ—Ä–µ–∑ PWA
- [ ] –û—Ñ–ª–∞–π–Ω —Ä–µ–∂–∏–º –∑ —Å–∏–Ω—Ö—Ä–æ–Ω—ñ–∑–∞—Ü—ñ—î—é
- [ ] Dark mode –ø–µ—Ä–µ–º–∏–∫–∞—á (—è–∫—â–æ Telegram –Ω–µ –ø—ñ–¥—Ç—Ä–∏–º—É—î)
- [ ] –ì—Ä–∞—Ñ—ñ–∫–∏ –∞–Ω–∞–ª—ñ—Ç–∏–∫–∏ (Chart.js)
- [ ] –ë–∞–≥–∞—Ç–æ–º–æ–≤–Ω—ñ—Å—Ç—å (i18n)
- [ ] –Ü–Ω—Ñ—ñ–Ω—ñ—Ç–Ω–∏–π —Å–∫—Ä–æ–ª –¥–ª—è –ø–æ—à—É–∫—É

---

## üë®‚Äçüíª –†–æ–∑—Ä–æ–±–∫–∞

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –∫–æ–¥—É:

```javascript
// index.html

// 1. –ì–ª–æ–±–∞–ª—å–Ω—ñ –∑–º—ñ–Ω–Ω—ñ
const tg = window.Telegram.WebApp;
const userId = tg.initDataUnsafe?.user?.id || 0;
const isAdmin = ADMIN_IDS.includes(userId);

// 2. –Ü–Ω—ñ—Ü—ñ–∞–ª—ñ–∑–∞—Ü—ñ—è
tg.expand();
tg.ready();

// 3. Event listeners
document.getElementById('searchInput').addEventListener('input', ...);

// 4. API —Ñ—É–Ω–∫—Ü—ñ—ó
async function search(query) { ... }
async function loadList() { ... }
async function loadArchives() { ... }

// 5. UI —Ñ—É–Ω–∫—Ü—ñ—ó
function renderProduct(p) { ... }
function updateDepartmentInfo(dept, count) { ... }
function switchTab(tab) { ... }

// 6. Admin —Ñ—É–Ω–∫—Ü—ñ—ó
async function loadAdminData() { ... }
async function uploadFile() { ... }
async function sendBroadcast() { ... }
```

### Best Practices:

1. **Async/Await** –¥–ª—è –≤—Å—ñ—Ö API –≤–∏–∫–ª–∏–∫—ñ–≤
2. **try/catch** –¥–ª—è –æ–±—Ä–æ–±–∫–∏ –ø–æ–º–∏–ª–æ–∫
3. **Debounce** –¥–ª—è –ø–æ—à—É–∫—É
4. **Loading states** –¥–ª—è –∫–æ–∂–Ω–æ—ó –≤–∫–ª–∞–¥–∫–∏
5. **Haptic feedback** –Ω–∞ –≤–∞–∂–ª–∏–≤—ñ –¥—ñ—ó

---

**–í–µ—Ä—Å—ñ—è:** 2.0.0  
**–û—Å—Ç–∞–Ω–Ω—è –æ–Ω–æ–≤–ª–µ–Ω–Ω—è:** 19.02.2026  
**–ê–≤—Ç–æ—Ä:** EpicService Team
