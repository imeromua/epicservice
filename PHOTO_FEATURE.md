# –§—É–Ω–∫—Ü—ñ—è —Ñ–æ—Ç–æ —Ç–æ–≤–∞—Ä—ñ–≤

## –û–ø–∏—Å

–î–∞–Ω–∞ —Ñ—É–Ω–∫—Ü—ñ—è –¥–æ–∑–≤–æ–ª—è—î –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞–º –∑–∞–≤–∞–Ω—Ç–∞–∂—É–≤–∞—Ç–∏ –¥–æ 3 —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ—ñ–π –¥–ª—è –∫–æ–∂–Ω–æ–≥–æ —Ç–æ–≤–∞—Ä—É. –§–æ—Ç–æ –≤—ñ–¥–æ–±—Ä–∞–∂–∞—é—Ç—å—Å—è:
- –ù–∞ –∫–∞—Ä—Ç—Ü—ñ —Ç–æ–≤–∞—Ä—É (—Å—Ç—ñ–∫–µ—Ä –∑ –∫—ñ–ª—å–∫—ñ—Å—Ç—é)
- –£ –º–æ–¥–∞–ª—å–Ω–æ–º—É –≤—ñ–∫–Ω—ñ –¥–æ–¥–∞–≤–∞–Ω–Ω—è —Ç–æ–≤–∞—Ä—É (—Ñ–æ—Ç–æ–≥–∞–ª–µ—Ä–µ—è)

**–í–∞–∂–ª–∏–≤–æ:** –§–æ—Ç–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—é—Ç—å—Å—è —Ç—ñ–ª—å–∫–∏ –¥–ª—è –≤—ñ–∑—É–∞–ª—ñ–∑–∞—Ü—ñ—ó –ø—Ä–∏ –¥–æ–¥–∞–≤–∞–Ω–Ω—ñ —Ç–æ–≤–∞—Ä—ñ–≤ —É —Å–ø–∏—Å–æ–∫. –í–æ–Ω–∏ **–Ω–µ –≤–∫–ª—é—á–∞—é—Ç—å—Å—è** –≤ –∑–≤—ñ—Ç–∏, —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –∞–±–æ –µ–∫—Å–ø–æ—Ä—Ç–æ–≤–∞–Ω—ñ —Ñ–∞–π–ª–∏.

## –û—Å–Ω–æ–≤–Ω—ñ –º–æ–∂–ª–∏–≤–æ—Å—Ç—ñ

### –î–ª—è –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤

1. **–ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è —Ñ–æ—Ç–æ**
   - –ú–∞–∫—Å–∏–º—É–º 3 —Ñ–æ—Ç–æ –Ω–∞ —Ç–æ–≤–∞—Ä
   - –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–µ —Å—Ç–∏—Å–∫–∞–Ω–Ω—è –¥–æ ~500KB
   - –ü—ñ–¥—Ç—Ä–∏–º–∫–∞ JPEG, PNG —Ç–∞ —ñ–Ω—à–∏—Ö —Ñ–æ—Ä–º–∞—Ç—ñ–≤

2. **–ü–µ—Ä–µ–≥–ª—è–¥ —Ñ–æ—Ç–æ**
   - –ì–æ—Ä—Ç–∞–Ω–Ω—è –º—ñ–∂ —Ñ–æ—Ç–æ —Å—Ç—Ä—ñ–ª–∫–∞–º–∏
   - –ü–æ–≤–Ω–æ–µ–∫—Ä–∞–Ω–Ω–∏–π —Ä–µ–∂–∏–º (–∫–ª—ñ–∫ –ø–æ —Ñ–æ—Ç–æ)
   - –õ—ñ—á–∏–ª—å–Ω–∏–∫ —Ñ–æ—Ç–æ (1/3, 2/3, —Ç–æ—â–æ)

3. **–í—ñ–∑—É–∞–ª—å–Ω—ñ —ñ–Ω–¥–∏–∫–∞—Ç–æ—Ä–∏**
   - –ó–æ–ª–æ—Ç–∏–π —Å—Ç—ñ–∫–µ—Ä –Ω–∞ –∫–∞—Ä—Ç—Ü—ñ —Ç–æ–≤–∞—Ä—É (üì∑ 2)
   - –í—ñ–¥–æ–±—Ä–∞–∂–µ–Ω–Ω—è –∫—ñ–ª—å–∫–æ—Å—Ç—ñ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–∏—Ö —Ñ–æ—Ç–æ

### –î–ª—è –∞–¥–º—ñ–Ω—ñ—Å—Ç—Ä–∞—Ç–æ—Ä—ñ–≤

1. **–ú–æ–¥–µ—Ä–∞—Ü—ñ—è —Ñ–æ—Ç–æ**
   - –ß–µ—Ä–≥–∞ –æ—á—ñ–∫—É—é—á–∏—Ö —Ñ–æ—Ç–æ (pending)
   - –®–≤–∏–¥–∫–µ —Å—Ö–≤–∞–ª–µ–Ω–Ω—è/–≤—ñ–¥—Ö–∏–ª–µ–Ω–Ω—è
   - –í–∫–∞–∑–∞–Ω–Ω—è –ø—Ä–∏—á–∏–Ω–∏ –≤—ñ–¥—Ö–∏–ª–µ–Ω–Ω—è

2. **–ö–µ—Ä—É–≤–∞–Ω–Ω—è —Ñ–æ—Ç–æ**
   - –í–∏–¥–∞–ª–µ–Ω–Ω—è –Ω–µ–¥–æ–ø—É—Å—Ç–∏–º–∏—Ö —Ñ–æ—Ç–æ
   - –ü–µ—Ä–µ–≥–ª—è–¥ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ (–∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–æ/—Å—Ö–≤–∞–ª–µ–Ω–æ/–≤—ñ–¥—Ö–∏–ª–µ–Ω–æ)
   - –í—ñ–¥—Å—Ç–µ–∂–µ–Ω–Ω—è –∞–≤—Ç–æ—Ä—ñ–≤ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω—å

## –¢–µ—Ö–Ω—ñ—á–Ω—ñ –¥–µ—Ç–∞–ª—ñ

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –±–∞–∑–∏ –¥–∞–Ω–∏—Ö

```sql
CREATE TABLE product_photos (
    id SERIAL PRIMARY KEY,
    –∞—Ä—Ç–∏–∫—É–ª VARCHAR(20) REFERENCES products(–∞—Ä—Ç–∏–∫—É–ª),
    file_path VARCHAR(500) NOT NULL,
    file_size INTEGER NOT NULL,
    original_size INTEGER NOT NULL,
    photo_order INTEGER DEFAULT 0,
    uploaded_by BIGINT REFERENCES users(id),
    uploaded_at TIMESTAMP DEFAULT NOW(),
    status VARCHAR(20) DEFAULT 'pending',
    moderated_by BIGINT REFERENCES users(id),
    moderated_at TIMESTAMP,
    rejection_reason VARCHAR(500)
);
```

### –°—Ç–∏—Å–∫–∞–Ω–Ω—è –∑–æ–±—Ä–∞–∂–µ–Ω—å

- **–ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∏–π —Ä–æ–∑–º—ñ—Ä:** 1200px –ø–æ –±—ñ–ª—å—à—ñ–π —Å—Ç–æ—Ä–æ–Ω—ñ
- **–¶—ñ–ª—å–æ–≤–∏–π —Ä–æ–∑–º—ñ—Ä —Ñ–∞–π–ª—É:** ~500KB
- **–§–æ—Ä–º–∞—Ç:** JPEG –∑ –æ–ø—Ç–∏–º—ñ–∑–∞—Ü—ñ—î—é
- **–ú–µ—Ç–æ–¥:** –ü—Ä–æ–≥—Ä–µ—Å–∏–≤–Ω–µ –∑–º–µ–Ω—à–µ–Ω–Ω—è —è–∫–æ—Å—Ç—ñ (95% ‚Üí 50%)

### API –µ–Ω–¥–ø–æ—ñ–Ω—Ç–∏

#### –ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è —Ñ–æ—Ç–æ
```
POST /api/photos/upload
Content-Type: multipart/form-data

Body:
- photo: File
- article: string
- user_id: integer
```

#### –û—Ç—Ä–∏–º–∞–Ω–Ω—è —Ñ–æ—Ç–æ —Ç–æ–≤–∞—Ä—É
```
GET /api/photos/product/{article}

Response: {
  success: true,
  photos: [
    {id: 1, file_path: "...", order: 0},
    ...
  ]
}
```

#### –ú–æ–¥–µ—Ä–∞—Ü—ñ—è
```
GET /api/photos/moderation/pending?user_id={admin_id}
POST /api/photos/moderation/{photo_id}
  - status: "approved" | "rejected"
  - reason: string (optional)
  - user_id: integer
```

## –í—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è

### 1. –û–Ω–æ–≤–∏—Ç–∏ –∑–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ

```bash
pip install -r requirements.txt
```

### 2. –ó–∞—Å—Ç–æ—Å—É–≤–∞—Ç–∏ –º—ñ–≥—Ä–∞—Ü—ñ—é

```bash
alembic upgrade head
```

### 3. –°—Ç–≤–æ—Ä–∏—Ç–∏ –¥–∏—Ä–µ–∫—Ç–æ—Ä—ñ—ó

```bash
mkdir -p webapp/static/uploads/photos
mkdir -p webapp/temp_files
```

### 4. –ü—ñ–¥–∫–ª—é—á–∏—Ç–∏ —Ä–æ—É—Ç–µ—Ä –≤ `webapp/api.py`

```python
from webapp.routers import photos

app.include_router(photos.router)
```

### 5. –î–æ–¥–∞—Ç–∏ —Å—Ç–∏–ª—ñ —Ç–∞ —Å–∫—Ä–∏–ø—Ç–∏ –≤ `index.html`

```html
<link rel="stylesheet" href="/static/css/photos.css">
<script src="/static/js/photos.js"></script>
```

## –í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è

### –î–ª—è –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤

1. –í—ñ–¥–∫—Ä–∏—Ç–∏ –º–æ–¥–∞–ª—å–Ω–µ –≤—ñ–∫–Ω–æ –¥–æ–¥–∞–≤–∞–Ω–Ω—è —Ç–æ–≤–∞—Ä—É
2. –ù–∞—Ç–∏—Å–Ω—É—Ç–∏ "üì∑ –î–æ–¥–∞—Ç–∏ —Ñ–æ—Ç–æ"
3. –û–±—Ä–∞—Ç–∏ —Ñ–æ—Ç–æ –∑ –≥–∞–ª–µ—Ä–µ—ó –∞–±–æ –∑—Ä–æ–±–∏—Ç–∏ –Ω–æ–≤–µ
4. –§–æ—Ç–æ –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ —Å—Ç–∏—Å–Ω–µ—Ç—å—Å—è —ñ –Ω–∞–¥—ñ—Å–ª–∞–Ω–æ –Ω–∞ –º–æ–¥–µ—Ä–∞—Ü—ñ—é

### –î–ª—è –∞–¥–º—ñ–Ω—ñ—Å—Ç—Ä–∞—Ç–æ—Ä—ñ–≤

1. –í—ñ–¥–∫—Ä–∏—Ç–∏ –≤–∫–ª–∞–¥–∫—É "üõ†Ô∏è –ê–¥–º—ñ–Ω"
2. –ü—Ä–æ–∫—Ä—É—Ç–∏—Ç–∏ –¥–æ —Å–µ–∫—Ü—ñ—ó "üñºÔ∏è –ú–æ–¥–µ—Ä–∞—Ü—ñ—è —Ñ–æ—Ç–æ"
3. –ü–µ—Ä–µ–≥–ª—è–Ω—É—Ç–∏ —Ñ–æ—Ç–æ —Ç–∞ –Ω–∞—Ç–∏—Å–Ω—É—Ç–∏:
   - "‚úÖ –°—Ö–≤–∞–ª–∏—Ç–∏" - —Ñ–æ—Ç–æ —Å—Ç–∞–Ω–µ –≤–∏–¥–∏–º–∏–º –¥–ª—è –≤—Å—ñ—Ö
   - "‚ùå –í—ñ–¥—Ö–∏–ª–∏—Ç–∏" - –≤–∫–∞–∑–∞—Ç–∏ –ø—Ä–∏—á–∏–Ω—É

## –û–±–º–µ–∂–µ–Ω–Ω—è

- –ú–∞–∫—Å–∏–º—É–º 3 —Ñ–æ—Ç–æ –Ω–∞ –æ–¥–∏–Ω —Ç–æ–≤–∞—Ä
- –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∏–π —Ä–æ–∑–º—ñ—Ä –∑–∞–≤–∞–Ω—Ç–∞–∂—É–≤–∞–Ω–æ–≥–æ —Ñ–∞–π–ª—É: 10MB
- –ü—ñ–¥—Ç—Ä–∏–º—É–≤–∞–Ω—ñ —Ñ–æ—Ä–º–∞—Ç–∏: JPEG, PNG, WebP, GIF
- –§–æ—Ç–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—é—Ç—å—Å—è **—Ç—ñ–ª—å–∫–∏** –¥–ª—è –ø–µ—Ä–µ–≥–ª—è–¥—É –ø—Ä–∏ –¥–æ–¥–∞–≤–∞–Ω–Ω—ñ

## –ë–µ–∑–ø–µ–∫–∞

- –í—Å—ñ —Ñ–æ—Ç–æ –ø—Ä–æ—Ö–æ–¥—è—Ç—å –º–æ–¥–µ—Ä–∞—Ü—ñ—é
- –î–æ—Å—Ç—É–ø –¥–æ —Ñ—É–Ω–∫—Ü—ñ–π –º–æ–¥–µ—Ä–∞—Ü—ñ—ó —Ç—ñ–ª—å–∫–∏ –¥–ª—è –∞–¥–º—ñ–Ω—ñ—Å—Ç—Ä–∞—Ç–æ—Ä—ñ–≤
- –ó–±–µ—Ä—ñ–≥–∞—î—Ç—å—Å—è —ñ—Å—Ç–æ—Ä—ñ—è –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω—å (—Ö—Ç–æ, –∫–æ–ª–∏, —è–∫–∏–π —Å—Ç–∞—Ç—É—Å)

## –ü–æ–¥–∞–ª—å—à—ñ –ø–æ–∫—Ä–∞—â–µ–Ω–Ω—è

- [ ] –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–∞ –ø–µ—Ä–µ–≤—ñ—Ä–∫–∞ —Ä–æ–∑–º–∏—Ç—Ç—è/—è–∫–æ—Å—Ç—ñ
- [ ] –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –Ω–∞ –¥—É–±–ª—ñ–∫–∞—Ç–∏
- [ ] –ü–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞–º –ø—Ä–æ —Å—Ç–∞—Ç—É—Å –º–æ–¥–µ—Ä–∞—Ü—ñ—ó
- [ ] –ú–∞—Å–æ–≤—ñ –æ–ø–µ—Ä–∞—Ü—ñ—ó –≤ –∞–¥–º—ñ–Ω—Ü—ñ
- [ ] –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω—å —Ç–∞ –º–æ–¥–µ—Ä–∞—Ü—ñ–π
