 <!DOCTYPE html>
<html lang="uk">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    
    <script src="/static/pwa-redirect.js"></script>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>

    <title>EpicService</title>

    <meta name="theme-color" content="#3b82f6">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="EpicService">
    <meta name="description" content="–°–∏—Å—Ç–µ–º–∞ –æ–±–ª—ñ–∫—É —Ç–æ–≤–∞—Ä—ñ–≤ –±–µ–∑ —Ä—É—Ö—É">

    <link rel="manifest" href="/static/manifest.json">
    <link rel="apple-touch-icon" sizes="180x180" href="/static/icons/icon-192x192.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/static/icons/icon-192x192.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/static/icons/icon-192x192.png">

    <link rel="stylesheet" href="/static/css/main.css">
    <link rel="stylesheet" href="/static/css/components.css">
    <link rel="stylesheet" href="/static/css/admin.css">
    <link rel="stylesheet" href="/static/filters-sidebar.css">
    <link rel="stylesheet" href="/static/pwa-styles.css">

    <script>
        // –ë–µ–∑–ø–µ—á–Ω–æ –ø–µ—Ä–µ–¥–∞—î–º–æ —Å–ø–∏—Å–æ–∫ ID –∞–¥–º—ñ–Ω—ñ—Å—Ç—Ä–∞—Ç–æ—Ä—ñ–≤ –∑ –±–µ–∫–µ–Ω–¥—É —É –≥–ª–æ–±–∞–ª—å–Ω—É –∑–º—ñ–Ω–Ω—É
        window.ADMIN_IDS = {{ admin_ids | default([]) | tojson }};
    </script>
</head>
<body>
    <div id="pwa-install-banner" class="pwa-install-banner">
        <div class="pwa-install-content">
            <span>–í—Å—Ç–∞–Ω–æ–≤–∏—Ç–∏ EpicService –Ω–∞ –µ–∫—Ä–∞–Ω "–î–æ–¥–æ–º—É"</span>
            <div>
                <button id="pwa-install-btn" class="btn btn-primary">–í—Å—Ç–∞–Ω–æ–≤–∏—Ç–∏</button>
                <button onclick="document.getElementById('pwa-install-banner').style.display='none'" class="btn" style="background: transparent; color: white;">–ü—ñ–∑–Ω—ñ—à–µ</button>
            </div>
        </div>
    </div>

    <div id="offline-indicator" class="offline-indicator hidden">
        ‚ö†Ô∏è –ù–µ–º–∞—î –∑'—î–¥–Ω–∞–Ω–Ω—è –∑ —ñ–Ω—Ç–µ—Ä–Ω–µ—Ç–æ–º
    </div>

    <div class="sticky-container">
        <div id="userInfo" style="font-size: 14px; font-weight: 500; margin-bottom: 12px; color: var(--hint-color);">
            –ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è...
        </div>

        <div class="tabs">
            <div class="tab active" data-tab="search">üîç –ü–æ—à—É–∫</div>
            <div class="tab" data-tab="cart">üõí –°–ø–∏—Å–æ–∫</div>
            <div class="tab" data-tab="archives">üìÅ –ê—Ä—Ö—ñ–≤–∏</div>
            <div class="tab hidden" data-tab="admin" id="adminTabBtn">‚öôÔ∏è –ê–¥–º—ñ–Ω–∫–∞</div>
        </div>
    </div>

    <div id="searchTab" class="tab-content active">
        <div class="search-box">
            <input type="text" id="searchInput" class="search-input" placeholder="–í–≤–µ–¥—ñ—Ç—å –Ω–∞–∑–≤—É –∞–±–æ –∞—Ä—Ç–∏–∫—É–ª...">
        </div>
        <div id="searchResults">
            <div style="text-align:center; padding:20px; color:var(--hint-color);">
                –ü–æ—á–Ω—ñ—Ç—å –≤–≤–æ–¥–∏—Ç–∏ –Ω–∞–∑–≤—É –¥–ª—è –ø–æ—à—É–∫—É
            </div>
        </div>
    </div>

    <div id="cartTab" class="tab-content">
        <div id="cartTotal" style="font-size: 18px; font-weight: 600; margin-bottom: 16px; text-align: right;">–†–∞–∑–æ–º: 0.00 ‚Ç¥</div>
        <div id="cartList"></div>
        
        <div style="display: flex; gap: 12px; margin-top: 20px;">
            <button id="checkoutBtn" class="btn btn-primary" style="display: none;">–í—ñ–¥–ø—Ä–∞–≤–∏—Ç–∏ –∑–∞–º–æ–≤–ª–µ–Ω–Ω—è</button>
            <button id="clearCartBtn" class="btn btn-danger" style="display: none; width: auto;">–û—á–∏—Å—Ç–∏—Ç–∏</button>
        </div>
    </div>

    <div id="archivesTab" class="tab-content">
        <div id="archivesList"></div>
    </div>

    <div id="adminTab" class="tab-content">
        <div id="adminPanelContainer">
            <div class="admin-section-title">üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞</div>
            <div class="stats-grid">
                <div class="stat-card" id="totalUsers">
                    <div class="stat-value" id="totalUsersVal">0</div>
                    <div class="stat-label">–ö–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤</div>
                </div>
                <div class="stat-card" id="totalProducts">
                    <div class="stat-value" id="totalProductsVal">0</div>
                    <div class="stat-label">–¢–æ–≤–∞—Ä—ñ–≤</div>
                </div>
                <div class="stat-card" id="activeUsers">
                    <div class="stat-value" id="activeUsersVal">0</div>
                    <div class="stat-label">–ê–∫—Ç–∏–≤–Ω–∏—Ö</div>
                </div>
                <div class="stat-card" id="reservedSum">
                    <div class="stat-value" id="reservedSumVal">0 ‚Ç¥</div>
                    <div class="stat-label">–í —Ä–µ–∑–µ—Ä–≤—ñ</div>
                </div>
            </div>

            <div class="admin-section-title">–ê–∫—Ç–∏–≤–Ω—ñ —Å–ø–∏—Å–∫–∏</div>
            <div id="activeUsersSection" style="margin-bottom: 24px;"></div>

            <div class="admin-section-title">–û–Ω–æ–≤–ª–µ–Ω–Ω—è –±–∞–∑–∏</div>
            <label class="file-upload-area" for="dbUpload">
                <span class="upload-icon">üìÑ</span>
                <div>–ù–∞—Ç–∏—Å–Ω—ñ—Ç—å –¥–ª—è –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è Excel —Ñ–∞–π–ª—É</div>
                <input type="file" id="dbUpload" accept=".xlsx" style="display: none;">
            </label>
            <div id="uploadStatus" style="display: none;"></div>

            <div class="admin-section-title">–†–æ–∑—Å–∏–ª–∫–∞</div>
            <div class="form-group">
                <textarea id="broadcastMessage" class="form-textarea" placeholder="–í–≤–µ–¥—ñ—Ç—å —Ç–µ–∫—Å—Ç –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –¥–ª—è –≤—Å—ñ—Ö –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤..."></textarea>
            </div>
            <button id="sendBroadcastBtn" class="btn btn-primary">–í—ñ–¥–ø—Ä–∞–≤–∏—Ç–∏ –≤—Å—ñ–º</button>
            <div id="broadcastAlert"></div>
        </div>
    </div>

    <script src="/static/js/utils.js"></script>
    <script src="/static/js/api.js"></script>
    <script src="/static/js/admin.js"></script>
    <script src="/static/filters-sidebar.js"></script>
    <script src="/static/js/app.js"></script>
    <script src="/static/pwa-install.js"></script>

    <script>
        window.addEventListener('online', () => document.getElementById('offline-indicator')?.classList.add('hidden'));
        window.addEventListener('offline', () => document.getElementById('offline-indicator')?.classList.remove('hidden'));
        if (!navigator.onLine) document.getElementById('offline-indicator')?.classList.remove('hidden');
    </script>
</body>
</html>

